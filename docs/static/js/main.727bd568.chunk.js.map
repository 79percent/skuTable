{"version":3,"sources":["Pages/Home/utils.ts","Pages/Home/index.tsx","App.tsx","index.tsx"],"names":["randomString","len","str","temp","index","Math","floor","random","attrNameList","label","value","attrValue","attrValueList","_x","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","attrNameValue","findItem","wrap","_context","prev","next","find","item","abrupt","stop","apply","arguments","originColumns","title","dataIndex","valueType","fieldProps","addonAfter","min","HomePage","_ref2","_Form$useForm","Form","useForm","form","_slicedToArray","_Form$useForm3","editableForm","_useState","useState","_useState2","formValues","setFormValues","_useState3","_useState4","skuKeyList","setSkuKeyList","_useState5","_useState6","dataSource","setDataSource","_useState7","_useState8","activeColumns","setActiveColumns","_useState9","show","msg","_useState10","alertVisile","setAlertVisile","editableKeys","map","id","console","log","columns","concat","_toConsumableArray","createSkuData","v","inputKeyList","values","getFieldsValue","skuMatrix","key","formAttrName","formAttrValue","attrName","_objectSpread","chileren","sku","i","length","_loop","itemArr","forEach","skuTree","skuData","recursion","node","path","restNode","_objectWithoutProperties","_excluded","push","Array","isArray","handleDeleteAttrValue","newDataSource","skuList","startIndex","oldItem","dataSourceItem","j","dataSourceSkuList","tempStartIndex","isSame","every","it","l","_dataSourceSkuList$l3","dataId","oprice","undefined","cprice","stock","validateFieldsTableData","_callee2","isEmpty","_msg","_context2","validateFields","Promise","reject","some","resolve","_jsxs","ProCard","children","ProForm","layout","onValuesChange","changeValues","allValues","labelCol","span","wrapperCol","submitter","_formValues$formAttrV","_formValues$formAttrV2","_formValues$formAttrN","_ref5","className","_jsx","ProFormSelect","name","allowClear","labelInValue","onSelect","copyActiveColumns","handleSelectAttrName","onChange","resetFields","initialValue","request","_callee3","_context3","style","width","rules","required","message","Item","isListField","ProFormList","creatorButtonProps","creatorButtonText","icon","type","disabled","onAfterRemove","copyIconProps","deleteIconProps","tooltipText","itemRender","_ref4","listDom","action","display","marginInlineEnd","beforeSkuList","filter","_dataSourceSkuList$l2","handleAddAttrValue","onDeselect","params","_callee4","_context4","Button","danger","onClick","splice","render","_","record","_skuList$i","copySkuKeyList","copyDataSource","itemSkuList","_dataSourceSkuList$l","handleDeleteSkuItem","PlusOutlined","currentIndex","editable","_skuList$currentIndex","ProTable","rowKey","search","options","pagination","recordList","Alert","showIcon","Row","marginTop","justify","align","_callee5","_context5","router","component","Home","App","props","useLocation","pathname","Routes","Route","element","ReactDOM","React","StrictMode","HashRouter","document","getElementById"],"mappings":"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","file":"static/js/main.727bd568.chunk.js","sourcesContent":["export const randomString = (len: number) => {\r\n  let str = '';\r\n  const temp = `0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ`;\r\n  for (let index = 0; index < len; index++) {\r\n    const randomNum = Math.floor(Math.random() * temp.length);\r\n    str += temp[randomNum];\r\n  }\r\n  return str;\r\n}\r\n\r\nexport const attrNameList = [\r\n  {\r\n    label: '型号',\r\n    value: 0,   \r\n    attrValue: [\r\n      {\r\n        label: 'iPhone 12',\r\n        value: 10\r\n      },\r\n      {\r\n        label: 'iPhone 13',\r\n        value: 11\r\n      },\r\n      {\r\n        label: 'iPhone 14',\r\n        value: 12\r\n      },\r\n    ] \r\n  },\r\n  {\r\n    label: '颜色',\r\n    value: 1,\r\n    attrValue: [\r\n      {\r\n        label: '黑色',\r\n        value: 13\r\n      },\r\n      {\r\n        label: '红色',\r\n        value: 14\r\n      },\r\n      {\r\n        label: '蓝色',\r\n        value: 15\r\n      },\r\n    ]\r\n  },\r\n  {\r\n    label: '内存',\r\n    value: 2,    \r\n    attrValue: [\r\n      {\r\n        label: '32G',\r\n        value: 16\r\n      },\r\n      {\r\n        label: '64G',\r\n        value: 17\r\n      },\r\n      {\r\n        label: '128G',\r\n        value: 18,\r\n      },\r\n    ]\r\n  },\r\n  \r\n]\r\n\r\nexport const attrValueList = async (attrNameValue: any) => {\r\n  const findItem = attrNameList.find((item) => (item.value === attrNameValue));\r\n  return findItem?.attrValue || [];\r\n}","import {\r\n\tProForm,\r\n\tProCard,\r\n\tProFormSelect,\r\n\tProTable,\r\n\tProFormList,\r\n} from \"@ant-design/pro-components\";\r\nimport { Alert, Button, Form, Row } from \"antd\";\r\nimport { useState } from \"react\";\r\nimport { randomString, attrNameList, attrValueList } from \"./utils\";\r\nimport \"./index.css\";\r\nimport type { ProColumns } from \"@ant-design/pro-components\";\r\nimport { PlusOutlined } from \"@ant-design/icons\";\r\n\r\nconst originColumns: ProColumns<any>[] = [\r\n\t{\r\n\t\ttitle: \"销售价\",\r\n\t\tdataIndex: \"oprice\",\r\n\t\tvalueType: \"digit\",\r\n\t\tfieldProps: {\r\n\t\t\taddonAfter: \"元\",\r\n\t\t\tmin: 0,\r\n\t\t},\r\n\t},\r\n\t{\r\n\t\ttitle: \"成本价\",\r\n\t\tdataIndex: \"cprice\",\r\n\t\tvalueType: \"digit\",\r\n\t\tfieldProps: {\r\n\t\t\taddonAfter: \"元\",\r\n\t\t\tmin: 0,\r\n\t\t},\r\n\t},\r\n\t{\r\n\t\ttitle: \"库存\",\r\n\t\tdataIndex: \"stock\",\r\n\t\tvalueType: \"digit\",\r\n\t\tfieldProps: {\r\n\t\t\tmin: 0,\r\n\t\t},\r\n\t},\r\n];\r\n\r\nexport default function HomePage() {\r\n\tconst [form] = Form.useForm();\r\n\tconst [editableForm] = Form.useForm();\r\n\tconst [formValues, setFormValues] = useState<any>(null);\r\n\tconst [skuKeyList, setSkuKeyList] = useState<any[]>([]);\r\n\tconst [dataSource, setDataSource] = useState<any[]>([]);\r\n\tconst [activeColumns, setActiveColumns] = useState<any[]>([]);\r\n\tconst [alertVisile, setAlertVisile] = useState({\r\n\t\tshow: false,\r\n\t\tmsg: \"\",\r\n\t});\r\n\r\n\tconst editableKeys = dataSource.map((item) => item?.id);\r\n\r\n\tconsole.log(dataSource);\r\n\r\n\tconst columns = [...activeColumns, ...originColumns];\r\n\r\n\t// 根据所选规格生成排列组合数据\r\n\tconst createSkuData = (v?: any, inputKeyList?: any[]) => {\r\n\t\tconst values = v || form?.getFieldsValue();\r\n\t\tconst keyList = inputKeyList || skuKeyList;\r\n\t\tconst skuList = keyList.map((key, index) => {\r\n\t\t\tconst formAttrName = `attrName_${key}`;\r\n\t\t\tconst formAttrValue = `attrValue_${key}`;\r\n\t\t\tconst attrName = values[formAttrName];\r\n\t\t\tlet attrValue: any[] = values[formAttrValue] || [];\r\n\t\t\tattrValue = attrValue.map((item) => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...item.value,\r\n\t\t\t\t\tchileren: [],\r\n\t\t\t\t};\r\n\t\t\t});\r\n\t\t\treturn {\r\n\t\t\t\tattrName,\r\n\t\t\t\tattrValue,\r\n\t\t\t};\r\n\t\t});\r\n\t\t// console.log(\"skuList\", skuList);\r\n\t\tconst skuMatrix = skuList.map((sku, index) => {\r\n\t\t\tconst { attrValue } = sku;\r\n\t\t\treturn attrValue;\r\n\t\t});\r\n\t\t// console.log(\"skuMatrix\", skuMatrix);\r\n\t\tlet i = skuMatrix.length - 1;\r\n\t\twhile (i >= 1) {\r\n\t\t\tconst itemArr = skuMatrix[i];\r\n\t\t\tconst prevItemArr = skuMatrix[i - 1];\r\n\t\t\tprevItemArr.forEach((item: any) => {\r\n\t\t\t\titem.chileren = itemArr;\r\n\t\t\t});\r\n\t\t\ti--;\r\n\t\t}\r\n\t\tconst skuTree = skuMatrix[0] || [];\r\n\t\t// console.log(\"skuTree\", skuTree);\r\n\t\tconst skuData: any[] = [];\r\n\t\tfunction recursion(node: any, path: any[]) {\r\n\t\t\tconst { chileren, ...restNode } = node;\r\n\t\t\tpath.push(restNode);\r\n\t\t\tif (Array.isArray(chileren) && chileren.length > 0) {\r\n\t\t\t\tchileren.forEach((item: any) => {\r\n\t\t\t\t\trecursion(item, [...path]);\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tskuData.push(path);\r\n\t\t\t}\r\n\t\t}\r\n\t\tskuTree.forEach((node: any) => {\r\n\t\t\trecursion(node, []);\r\n\t\t});\r\n\t\tconsole.log(\"skuData\", skuData);\r\n\t\treturn skuData;\r\n\t};\r\n\r\n\t// 添加规格项\r\n\tconst handleAddSkuItem = async () => {\r\n\t\tawait form.validateFields();\r\n\t\tconst key = `new_${randomString(20)}`;\r\n\t\tconst currentIndex = skuKeyList.length;\r\n\t\tsetSkuKeyList([...skuKeyList, key]);\r\n\t\tsetActiveColumns([\r\n\t\t\t...activeColumns,\r\n\t\t\t{\r\n\t\t\t\ttitle: \"#\",\r\n\t\t\t\tdataIndex: `#${currentIndex}`,\r\n\t\t\t\teditable: false,\r\n\t\t\t\trender: (_: any, record: any) => {\r\n\t\t\t\t\tconst { skuList } = record;\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t(Array.isArray(skuList) && skuList[currentIndex]?.label) || \"-\"\r\n\t\t\t\t\t);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t]);\r\n\t\tif (dataSource.length === 0) {\r\n\t\t\tconst dataId = randomString(20);\r\n\t\t\tsetDataSource([\r\n\t\t\t\t{\r\n\t\t\t\t\tid: dataId,\r\n\t\t\t\t\toprice: undefined,\r\n\t\t\t\t\tcprice: undefined,\r\n\t\t\t\t\tstock: undefined,\r\n\t\t\t\t\tskuList: [],\r\n\t\t\t\t},\r\n\t\t\t]);\r\n\t\t}\r\n\t};\r\n\r\n\t// 选择规格名\r\n\tconst handleSelectAttrName = (item: any, index: number) => {\r\n\t\tconst copyActiveColumns = [...activeColumns];\r\n\t\tcopyActiveColumns[index].title = item.label;\r\n\t\tcopyActiveColumns[index].dataIndex = item.value;\r\n\t\tsetActiveColumns(copyActiveColumns);\r\n\t};\r\n\r\n\t// 删除规格项\r\n\tconst handleDeleteSkuItem = (index: number) => {\r\n\t\tlet copyActiveColumns = [...activeColumns];\r\n\t\tcopyActiveColumns.splice(index, 1);\r\n\t\tcopyActiveColumns = copyActiveColumns.map((item, i) => {\r\n\t\t\treturn {\r\n\t\t\t\t...item,\r\n\t\t\t\tdataIndex: `#${i}`,\r\n\t\t\t\trender: (_: any, record: any) => {\r\n\t\t\t\t\tconst { skuList } = record;\r\n\t\t\t\t\treturn (Array.isArray(skuList) && skuList[i]?.label) || \"-\";\r\n\t\t\t\t},\r\n\t\t\t};\r\n\t\t});\r\n\t\tsetActiveColumns(copyActiveColumns);\r\n\t\tconst copySkuKeyList = [...skuKeyList];\r\n\t\tcopySkuKeyList.splice(index, 1);\r\n\t\tsetSkuKeyList(copySkuKeyList);\r\n\t\tif (copySkuKeyList.length === 0) {\r\n\t\t\tsetDataSource([]);\r\n\t\t} else {\r\n\t\t\tconst formAttrName = `attrName_${skuKeyList[index]}`;\r\n\t\t\tconst formAttrValue = `attrValue_${skuKeyList[index]}`;\r\n\t\t\tconst values = form?.getFieldsValue();\r\n\t\t\tdelete values[formAttrName];\r\n\t\t\tdelete values[formAttrValue];\r\n\t\t\tconst skuData = createSkuData(values, copySkuKeyList);\r\n\t\t\tlet copyDataSource = [...dataSource];\r\n\t\t\tcopyDataSource.map((item) => {\r\n\t\t\t\tlet itemSkuList: any[] = item?.skuList || [];\r\n\t\t\t\titemSkuList = itemSkuList.splice(index, 1);\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...item,\r\n\t\t\t\t\tskuList: itemSkuList,\r\n\t\t\t\t};\r\n\t\t\t});\r\n\t\t\tcopyDataSource = skuData.map((skuList: any[]) => {\r\n\t\t\t\treturn copyDataSource.find((dataSourceItem) => {\r\n\t\t\t\t\tconst dataSourceSkuList: any[] = dataSourceItem?.skuList || [];\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\tdataSourceSkuList.length === skuList.length &&\r\n\t\t\t\t\t\tskuList.every((it, l) => it?.value === dataSourceSkuList[l]?.value)\r\n\t\t\t\t\t);\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\tsetDataSource(copyDataSource);\r\n\t\t}\r\n\t};\r\n\r\n\t// 添加规格值\r\n\tconst handleAddAttrValue = (item: any, index: number) => {\r\n\t\tconst skuData = createSkuData();\r\n\t\tlet startIndex = -1;\r\n\t\tsetDataSource(\r\n\t\t\tskuData.map((skuList: any[], i) => {\r\n\t\t\t\tconst beforeSkuList = skuList.filter((it) => it.value !== item.value);\r\n\t\t\t\tconst oldItem = dataSource.find((dataSourceItem, j) => {\r\n\t\t\t\t\tconst dataSourceSkuList: any[] = dataSourceItem.skuList || [];\r\n\t\t\t\t\tif (dataSourceSkuList.length === 0) {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconst isSame =\r\n\t\t\t\t\t\t\tbeforeSkuList.length === dataSourceSkuList.length &&\r\n\t\t\t\t\t\t\tbeforeSkuList.every(\r\n\t\t\t\t\t\t\t\t(it, l) => it?.value === dataSourceSkuList[l]?.value\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\tconst tempStartIndex = startIndex;\r\n\t\t\t\t\t\tstartIndex = j;\r\n\t\t\t\t\t\treturn j > tempStartIndex && isSame;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\treturn {\r\n\t\t\t\t\tid: randomString(20),\r\n\t\t\t\t\toprice: undefined,\r\n\t\t\t\t\tcprice: undefined,\r\n\t\t\t\t\tstock: undefined,\r\n\t\t\t\t\t...oldItem,\r\n\t\t\t\t\tskuList,\r\n\t\t\t\t};\r\n\t\t\t})\r\n\t\t);\r\n\t};\r\n\r\n\t// 删除规格值\r\n\tconst handleDeleteAttrValue = (item: any, index: number) => {\r\n\t\tconst skuData = createSkuData();\r\n\t\tlet newDataSource = [];\r\n\t\tif (skuData.length === 0) {\r\n\t\t\tnewDataSource = dataSource.map((item) => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...item,\r\n\t\t\t\t\tskuList: [],\r\n\t\t\t\t};\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tlet startIndex = -1;\r\n\t\t\tnewDataSource = skuData.map((skuList: any[], i) => {\r\n\t\t\t\tconst oldItem = dataSource.find((dataSourceItem, j) => {\r\n\t\t\t\t\tconst dataSourceSkuList: any[] = dataSourceItem.skuList || [];\r\n\t\t\t\t\tif (dataSourceSkuList.length === 0) {\r\n\t\t\t\t\t\tconst tempStartIndex = startIndex;\r\n\t\t\t\t\t\tstartIndex = j;\r\n\t\t\t\t\t\treturn j > tempStartIndex;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconst isSame =\r\n\t\t\t\t\t\t\tskuList.length === dataSourceSkuList.length &&\r\n\t\t\t\t\t\t\tskuList.every(\r\n\t\t\t\t\t\t\t\t(it, l) => it?.value === dataSourceSkuList[l]?.value\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\tconst tempStartIndex = startIndex;\r\n\t\t\t\t\t\tstartIndex = j;\r\n\t\t\t\t\t\treturn j > tempStartIndex && isSame;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...oldItem,\r\n\t\t\t\t\tskuList,\r\n\t\t\t\t};\r\n\t\t\t});\r\n\t\t}\r\n\t\tif (newDataSource.length === 0) {\r\n\t\t\tconst dataId = randomString(20);\r\n\t\t\tsetDataSource([\r\n\t\t\t\t{\r\n\t\t\t\t\tid: dataId,\r\n\t\t\t\t\toprice: undefined,\r\n\t\t\t\t\tcprice: undefined,\r\n\t\t\t\t\tstock: undefined,\r\n\t\t\t\t},\r\n\t\t\t]);\r\n\t\t} else {\r\n\t\t\tsetDataSource(newDataSource);\r\n\t\t}\r\n\t};\r\n\r\n\t// 校验表格数据\r\n\tconst validateFieldsTableData = async () => {\r\n\t\tawait form.validateFields();\r\n\t\tif (dataSource.length === 0) {\r\n\t\t\tconst msg = \"请至少添加一个规格\";\r\n\t\t\tsetAlertVisile({\r\n\t\t\t\tshow: true,\r\n\t\t\t\tmsg,\r\n\t\t\t});\r\n\t\t\treturn Promise.reject(msg);\r\n\t\t}\r\n\t\tfunction isEmpty(value: any) {\r\n\t\t\treturn typeof value === \"undefined\" || value === \"\";\r\n\t\t}\r\n\t\tlet hasEmpty = dataSource.some((item) => {\r\n\t\t\tconst { oprice, cprice, stock, skuList } = item;\r\n\t\t\treturn (\r\n\t\t\t\t!Array.isArray(skuList) ||\r\n\t\t\t\tskuList.length === 0 ||\r\n\t\t\t\tskuList.length !== skuKeyList.length ||\r\n\t\t\t\tisEmpty(oprice) ||\r\n\t\t\t\tisEmpty(cprice) ||\r\n\t\t\t\tisEmpty(stock)\r\n\t\t\t);\r\n\t\t});\r\n\t\tif (hasEmpty) {\r\n\t\t\tconst msg = \"请添加规格值、销售价、成本价、库存\";\r\n\t\t\tsetAlertVisile({\r\n\t\t\t\tshow: true,\r\n\t\t\t\tmsg,\r\n\t\t\t});\r\n\t\t\treturn Promise.reject(msg);\r\n\t\t}\r\n\t\tsetAlertVisile({\r\n\t\t\tshow: false,\r\n\t\t\tmsg: \"\",\r\n\t\t});\r\n\t\treturn Promise.resolve(true);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<ProCard>\r\n\t\t\t<ProForm\r\n\t\t\t\tform={form}\r\n\t\t\t\tlayout=\"horizontal\"\r\n\t\t\t\tonValuesChange={(changeValues, allValues) => {\r\n\t\t\t\t\tsetFormValues(allValues);\r\n\t\t\t\t}}\r\n\t\t\t\tlabelCol={{\r\n\t\t\t\t\tspan: 4,\r\n\t\t\t\t}}\r\n\t\t\t\twrapperCol={{\r\n\t\t\t\t\tspan: 16,\r\n\t\t\t\t}}\r\n\t\t\t\tsubmitter={false}\r\n\t\t\t>\r\n\t\t\t\t{/* 规格项列表 */}\r\n\t\t\t\t{skuKeyList.map((key, index) => {\r\n\t\t\t\t\tconst formAttrName = `attrName_${key}`;\r\n\t\t\t\t\tconst formAttrValue = `attrValue_${key}`;\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<div key={key} className=\"attrCard\">\r\n\t\t\t\t\t\t\t<ProFormSelect\r\n\t\t\t\t\t\t\t\tlabel=\"规格名\"\r\n\t\t\t\t\t\t\t\tname={formAttrName}\r\n\t\t\t\t\t\t\t\tallowClear={false}\r\n\t\t\t\t\t\t\t\tfieldProps={{\r\n\t\t\t\t\t\t\t\t\tlabelInValue: true,\r\n\t\t\t\t\t\t\t\t\tonSelect: (item) => handleSelectAttrName(item, index),\r\n\t\t\t\t\t\t\t\t\tonChange: () => {\r\n\t\t\t\t\t\t\t\t\t\tconst values = form.getFieldsValue();\r\n\t\t\t\t\t\t\t\t\t\tform?.resetFields([formAttrValue]);\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tinitialValue={undefined}\r\n\t\t\t\t\t\t\t\trequest={async () =>\r\n\t\t\t\t\t\t\t\t\tattrNameList.map((item) => ({\r\n\t\t\t\t\t\t\t\t\t\tlabel: item.label,\r\n\t\t\t\t\t\t\t\t\t\tvalue: item.value,\r\n\t\t\t\t\t\t\t\t\t}))\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\twidth: 200,\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\trules={[\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\t\t\t\tmessage: \"请选择规格名\",\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t]}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<ProForm.Item\r\n\t\t\t\t\t\t\t\tisListField\r\n\t\t\t\t\t\t\t\tlabel=\"规格值\"\r\n\t\t\t\t\t\t\t\twrapperCol={{\r\n\t\t\t\t\t\t\t\t\tspan: 16,\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<ProFormList\r\n\t\t\t\t\t\t\t\t\tname={formAttrValue}\r\n\t\t\t\t\t\t\t\t\tcreatorButtonProps={{\r\n\t\t\t\t\t\t\t\t\t\tcreatorButtonText: \"添加\",\r\n\t\t\t\t\t\t\t\t\t\ticon: false,\r\n\t\t\t\t\t\t\t\t\t\ttype: \"link\",\r\n\t\t\t\t\t\t\t\t\t\tdisabled: !formValues?.[formAttrValue]?.every(\r\n\t\t\t\t\t\t\t\t\t\t\t(item: any) => item?.value\r\n\t\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\t\tstyle: { width: \"unset\" },\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tmin={1}\r\n\t\t\t\t\t\t\t\t\tinitialValue={[\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tvalue: undefined,\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t]}\r\n\t\t\t\t\t\t\t\t\tonAfterRemove={handleDeleteAttrValue}\r\n\t\t\t\t\t\t\t\t\tcopyIconProps={false}\r\n\t\t\t\t\t\t\t\t\tdeleteIconProps={\r\n\t\t\t\t\t\t\t\t\t\tformValues?.[formAttrValue]?.length > 1 && {\r\n\t\t\t\t\t\t\t\t\t\t\ttooltipText: \"删除\",\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\titemRender={({ listDom, action }) => (\r\n\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\tdisplay: \"inline-flex\",\r\n\t\t\t\t\t\t\t\t\t\t\t\tmarginInlineEnd: 25,\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t{listDom}\r\n\t\t\t\t\t\t\t\t\t\t\t{action}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<ProFormSelect\r\n\t\t\t\t\t\t\t\t\t\tname={[\"value\"]}\r\n\t\t\t\t\t\t\t\t\t\tfieldProps={{\r\n\t\t\t\t\t\t\t\t\t\t\tallowClear: false,\r\n\t\t\t\t\t\t\t\t\t\t\tlabelInValue: true,\r\n\t\t\t\t\t\t\t\t\t\t\tonSelect: (item) => handleAddAttrValue(item, index),\r\n\t\t\t\t\t\t\t\t\t\t\tonDeselect: (item) => handleDeleteAttrValue(item, index),\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\tparams={{\r\n\t\t\t\t\t\t\t\t\t\t\tattrNameValue: formValues?.[formAttrName]?.value,\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\trequest={async (params) => {\r\n\t\t\t\t\t\t\t\t\t\t\treturn attrValueList(params?.attrNameValue);\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\twidth: 200,\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\trules={[\r\n\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\t\t\t\t\t\tmessage: \"请选择规格值\",\r\n\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t]}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</ProFormList>\r\n\t\t\t\t\t\t\t</ProForm.Item>\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\ttype=\"primary\"\r\n\t\t\t\t\t\t\t\tdanger\r\n\t\t\t\t\t\t\t\tclassName=\"deleteAttr\"\r\n\t\t\t\t\t\t\t\tonClick={() => handleDeleteSkuItem(index)}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t删除规格项\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t);\r\n\t\t\t\t})}\r\n\t\t\t\t{/* 添加规格项 按钮 */}\r\n\t\t\t\t<ProForm.Item label=\"\" wrapperCol={{ span: 24 }}>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\ttype=\"dashed\"\r\n\t\t\t\t\t\ticon={<PlusOutlined />}\r\n\t\t\t\t\t\tstyle={{ width: \"100%\" }}\r\n\t\t\t\t\t\tonClick={handleAddSkuItem}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t添加规格项\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</ProForm.Item>\r\n\t\t\t</ProForm>\r\n\t\t\t{/* SKU 表格 */}\r\n\t\t\t<ProTable\r\n\t\t\t\trowKey=\"id\"\r\n\t\t\t\tdataSource={dataSource}\r\n\t\t\t\tcolumns={columns}\r\n\t\t\t\tsearch={false}\r\n\t\t\t\toptions={false}\r\n\t\t\t\tpagination={false}\r\n\t\t\t\teditable={{\r\n\t\t\t\t\ttype: \"multiple\",\r\n\t\t\t\t\teditableKeys,\r\n\t\t\t\t\tform: editableForm,\r\n\t\t\t\t\tonValuesChange: (record, recordList) => {\r\n\t\t\t\t\t\tsetDataSource(recordList);\r\n\t\t\t\t\t},\r\n\t\t\t\t}}\r\n\t\t\t/>\r\n\t\t\t{/* 校验提示 */}\r\n\t\t\t{alertVisile.show && (\r\n\t\t\t\t<Alert message={alertVisile.msg} type=\"error\" showIcon />\r\n\t\t\t)}\r\n\t\t\t{/* 提交按钮 */}\r\n\t\t\t<Row style={{ marginTop: 16, width: '100%' }} justify=\"center\" align=\"middle\">\r\n\t\t\t\t<Button\r\n\t\t\t\t\ttype=\"primary\"\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\twidth: 120\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tonClick={async () => {\r\n\t\t\t\t\t\tawait validateFieldsTableData();\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t提交\r\n\t\t\t\t</Button>\r\n\t\t\t</Row>\r\n\t\t</ProCard>\r\n\t);\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport \"./App.css\";\r\nimport { Routes, Route, Link, useLocation } from \"react-router-dom\";\r\nimport Home from './Pages/Home';\r\n\r\ntype RouterItem = {\r\n\tpath: string;\r\n\ttitle: string;\r\n\tcomponent?: JSX.Element;\r\n};\r\n\r\nconst router: RouterItem[] = [\r\n\t{\r\n\t\tpath: \"/\",\r\n\t\ttitle: \"SkuTable\",\r\n\t\tcomponent: <Home />,\r\n\t},\r\n];\r\n\r\nconst App: React.FC = (props) => {\r\n\tconst location = useLocation();\r\n\tconst { pathname } = location;\r\n\r\n\treturn (\r\n\t\t<div className=\"App\">\r\n\t\t\t<Routes>\r\n\t\t\t\t{router.map((item) => {\r\n\t\t\t\t\tconst { path, component } = item;\r\n\t\t\t\t\treturn <Route key={path} path={path} element={component} />;\r\n\t\t\t\t})}\r\n\t\t\t</Routes>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\nimport { HashRouter } from \"react-router-dom\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <HashRouter>\r\n      <App />\r\n    </HashRouter>\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}